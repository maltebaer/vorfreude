<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Vorfreude</title>
    <link rel="icon" href="https://fav.farm/heart" />
    <meta name="theme-color" content="rgba(175, 109, 255, 0.85)">
    <style>
        * {
            box-sizing: border-box;
        }

        html {
            background-color: rgba(175, 109, 255, 0.85);
        }

        body {
            margin: 0;
            font-family: ui-rounded, 'Hiragino Maru Gothic ProN', Quicksand, Comfortaa, Manjari, 'Arial Rounded MT', 'Arial Rounded MT Bold', Calibri, source-sans-pro, sans-serif;
            font-weight: normal;
            color: rebeccapurple;

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100dvh;

            background-image: radial-gradient(circle at center, lavenderblush, transparent);

            touch-action: manipulation;
        }

        h1 {
            text-align: center;
            font-size: 3rem;

            display: flex;
            flex-direction: column;

            line-height: 1.2;
        }

        #time {
            font-family: Superclarendon, 'Bookman Old Style', 'URW Bookman', 'URW Bookman L', 'Georgia Pro', Georgia, serif;
            font-size: 5rem;
            transform: translateY(-0.025em);
        }

        button {
            cursor: pointer;
            border: none;
            background-color: rgba(175, 109, 255, 0.85);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <h1>
        <div>Nur noch</div>
        <div id="time"></div>
        <div id="unit"></div>
    </h1>
    <button>oder...</button>

    <script>
        const timeElement = document.querySelector('#time');
        const unitElement = document.querySelector('#unit');
        const button = document.querySelector('button');

        const goalDate = new Date("2025-10-25T20:00:00");
        const displayModes = ['schlafen', 'Stunden', 'Minuten', 'Sekunden'];
        let modeIndex = 0;
        let intervalId;

        function getRemainingValue(mode) {
            const now = new Date();
            const remainingTime = goalDate - now;
            switch (mode) {
                case 'schlafen': {
                    // If after 6am, today does not count as a remaining night
                    let nights = 0;
                    let tempDate = new Date(now);
                    if (tempDate.getHours() >= 6) {
                        // Start counting from tomorrow
                        tempDate.setDate(tempDate.getDate() + 1);
                        tempDate.setHours(0, 0, 0, 0);
                    } else {
                        // Start counting from today
                        tempDate.setHours(0, 0, 0, 0);
                    }
                    // Count nights until goalDate
                    while (tempDate < goalDate) {
                        nights++;
                        tempDate.setDate(tempDate.getDate() + 1);
                    }
                    return nights;
                }
                case 'Stunden':
                    return Math.ceil(remainingTime / (1000 * 60 * 60));
                case 'Minuten':
                    return Math.ceil(remainingTime / (1000 * 60));
                case 'Sekunden':
                    return Math.ceil(remainingTime / 1000);
                default:
                    return 0;
            }
        }

        function updateDisplay() {
            const mode = displayModes[modeIndex];
            let value = getRemainingValue(mode);
            if (mode === 'schlafen') {
                value += 'x';
            } else {
                value = value.toLocaleString('de-DE');
            }
            timeElement.textContent = value;
            unitElement.textContent = mode;
        }

        function setUpdateInterval() {
            clearInterval(intervalId);
            const mode = displayModes[modeIndex];
            intervalId = setInterval(updateDisplay, mode === 'Sekunden' ? 1000 : 60000);
        }

        button.addEventListener('click', () => {
            modeIndex = (modeIndex + 1) % displayModes.length;
            updateDisplay();
            setUpdateInterval();
        });

        updateDisplay();
        setUpdateInterval();
    </script>
</body>

</html>